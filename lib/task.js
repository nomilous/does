// Generated by CoffeeScript 1.4.0
var Task, defer, uuid;

defer = require('when').defer;

uuid = require('node-uuid');

module.exports = Task = (function() {

  function Task(opts) {
    var _this = this;
    if (opts == null) {
      opts = {};
    }
    this.uuid = opts.uuid || uuid.v1();
    this.deferral = void 0;
    Object.defineProperty(this, 'uuid', {
      writable: false,
      enumerable: true,
      value: this.uuid
    });
    Object.defineProperty(this, 'deferral', {
      enumerable: false
    });
    Object.defineProperty(this, 'running', {
      enumerable: true,
      get: function() {
        return _this.deferral != null;
      }
    });
  }

  Task.prototype.start = function() {
    if (this.running) {
      return this.deferral.promise;
    }
    this.deferral = defer();
    return this.deferral.promise;
  };

  return Task;

})();
