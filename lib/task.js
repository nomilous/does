// Generated by CoffeeScript 1.4.0
var fluent, tasks, uniq;

fluent = require('./decorators').fluent;

uniq = require('./decorators').uniq;

tasks = {};

module.exports = {
  create: uniq(tasks, function(taskTitle) {
    var actions, middleware, running, task;
    running = false;
    actions = {};
    middleware = [];
    task = {
      does: fluent(uniq(actions, function(actionTitle, actionFn) {
        return middleware.push(actionFn);
      })),
      start: fluent(function(input) {
        var fn, _i, _len, _results;
        running = true;
        _results = [];
        for (_i = 0, _len = middleware.length; _i < _len; _i++) {
          fn = middleware[_i];
          _results.push(fn(input));
        }
        return _results;
      })
    };
    Object.defineProperty(task, 'title', {
      get: function() {
        return taskTitle;
      },
      readonly: true,
      enumerable: true
    });
    Object.defineProperty(task, 'running', {
      get: function() {
        return running;
      },
      readonly: true,
      enumerable: true
    });
    return task;
  })
};
